{"ast":null,"code":"import { TablePattern } from 'src/app/models/TablePattern';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/book-api.service\";\nimport * as i2 from \"@angular/common\";\nfunction DataTableComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const column_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(column_r4.name);\n  }\n}\nfunction DataTableComponent_td_10_input_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 13);\n  }\n  if (rf & 2) {\n    const column_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"type\", column_r5.type);\n  }\n}\nfunction DataTableComponent_td_10_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵtext(1, \"Show object\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DataTableComponent_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, DataTableComponent_td_10_input_1_Template, 1, 1, \"input\", 11);\n    i0.ɵɵtemplate(2, DataTableComponent_td_10_button_2_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const column_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.columnIsObject(column_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.columnIsObject(column_r5));\n  }\n}\nfunction DataTableComponent_tr_14_td_1_input_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 13);\n  }\n  if (rf & 2) {\n    const column_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"type\", column_r11.type);\n  }\n}\nfunction DataTableComponent_tr_14_td_1_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵtext(1, \"Show object\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DataTableComponent_tr_14_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, DataTableComponent_tr_14_td_1_input_1_Template, 1, 1, \"input\", 11);\n    i0.ɵɵtemplate(2, DataTableComponent_tr_14_td_1_button_2_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const column_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r10.columnIsObject(column_r11));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.columnIsObject(column_r11));\n  }\n}\nfunction DataTableComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, DataTableComponent_tr_14_td_1_Template, 3, 2, \"td\", 3);\n    i0.ɵɵelementStart(2, \"td\", 4)(3, \"button\", 9);\n    i0.ɵɵtext(4, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 10);\n    i0.ɵɵtext(6, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.columns);\n  }\n}\nfunction DataTableComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelement(1, \"input\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const column_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"type\", column_r15.type);\n  }\n}\nexport class DataTableComponent {\n  constructor(bookApi) {\n    this.bookApi = bookApi;\n    this.tablePattern = TablePattern.empty();\n    this._prevTablePattern = TablePattern.empty();\n    this._columns = [];\n    this._rows = [];\n  }\n  get columns() {\n    if (this._columns.length === 0 || this._prevTablePattern !== this.tablePattern) {\n      this._prevTablePattern = this.tablePattern;\n      this._columns = this.tablePattern.columns;\n      this.bookApi.getAll().subscribe(data => {\n        console.log(data);\n        this._rows = data;\n      });\n    }\n    return this._columns;\n  }\n  columnIsObject(column) {\n    return typeof column.type !== \"string\";\n  }\n  get rows() {\n    return this._rows;\n  }\n}\nDataTableComponent.ɵfac = function DataTableComponent_Factory(t) {\n  return new (t || DataTableComponent)(i0.ɵɵdirectiveInject(i1.BookApiService));\n};\nDataTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DataTableComponent,\n  selectors: [[\"app-data-table\"]],\n  inputs: {\n    tablePattern: \"tablePattern\"\n  },\n  decls: 32,\n  vars: 4,\n  consts: [[1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [1, \"actions\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"text\", \"readonly\", \"\", \"value\", \"View mode\", \"disabled\", \"\"], [\"type\", \"text\", \"value\", \"View mode\", \"disabled\", \"\", \"readonly\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\"], [\"type\", \"text\", 3, \"type\", 4, \"ngIf\"], [\"class\", \"btn btn-primary\", \"type\", \"button\", 4, \"ngIf\"], [\"type\", \"text\", 3, \"type\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"]],\n  template: function DataTableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"table\", 2)(3, \"thead\")(4, \"tr\");\n      i0.ɵɵtemplate(5, DataTableComponent_th_5_Template, 2, 1, \"th\", 3);\n      i0.ɵɵelementStart(6, \"th\", 4);\n      i0.ɵɵtext(7, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"tbody\")(9, \"tr\");\n      i0.ɵɵtemplate(10, DataTableComponent_td_10_Template, 3, 2, \"td\", 3);\n      i0.ɵɵelementStart(11, \"td\", 4)(12, \"button\", 5);\n      i0.ɵɵtext(13, \"Add new\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(14, DataTableComponent_tr_14_Template, 7, 1, \"tr\", 3);\n      i0.ɵɵelementStart(15, \"tr\");\n      i0.ɵɵtemplate(16, DataTableComponent_td_16_Template, 2, 1, \"td\", 3);\n      i0.ɵɵelementStart(17, \"td\", 4)(18, \"button\", 5);\n      i0.ɵɵtext(19, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"button\", 6);\n      i0.ɵɵtext(21, \"Cancel\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"tr\")(23, \"td\");\n      i0.ɵɵelement(24, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"td\");\n      i0.ɵɵelement(26, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"td\", 4)(28, \"button\", 9);\n      i0.ɵɵtext(29, \"Edit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"button\", 10);\n      i0.ɵɵtext(31, \"Delete\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.rows);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf],\n  styles: [\"input[_ngcontent-%COMP%]{\\r\\n    width: 100%;\\r\\n}\\r\\n.actions[_ngcontent-%COMP%]{\\r\\n    text-align: center;\\r\\n}\\r\\nth.actions[_ngcontent-%COMP%]{\\r\\n    width: 200px;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n    margin-left: 4px;\\r\\n    margin-right: 4px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kYXRhLXRhYmxlL2RhdGEtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7QUFDZjtBQUNBO0lBQ0ksa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxZQUFZO0FBQ2hCO0FBQ0E7SUFDSSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiaW5wdXR7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG4uYWN0aW9uc3tcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG50aC5hY3Rpb25ze1xyXG4gICAgd2lkdGg6IDIwMHB4O1xyXG59XHJcbmJ1dHRvbntcclxuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["TablePattern","i0","DataTableComponent","constructor","bookApi","empty","columns","_columns","length","_prevTablePattern","tablePattern","getAll","subscribe","data","console","log","_rows","columnIsObject","column","type","rows","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["P:\\NURE\\СРБД\\ssdb_lw_4\\ClientApp\\src\\app\\components\\data-table\\data-table.component.ts","P:\\NURE\\СРБД\\ssdb_lw_4\\ClientApp\\src\\app\\components\\data-table\\data-table.component.html"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { BookModel } from 'src/app/models/BookModels';\nimport { ColumnType, TablePattern } from 'src/app/models/TablePattern';\nimport { BookApiService } from 'src/app/services/book-api.service';\n\n@Component({\n  selector: 'app-data-table',\n  templateUrl: './data-table.component.html',\n  styleUrls: ['./data-table.component.css']\n})\nexport class DataTableComponent {\n  @Input() \n  public tablePattern: TablePattern = TablePattern.empty();\n\n  private _prevTablePattern: TablePattern = TablePattern.empty();\n\n  private _columns: ColumnType[] = [];\n\n  private _rows: any[] = [];\n\n  constructor(private bookApi: BookApiService) { }\n\n  public get columns(): ColumnType[] {\n    if (this._columns.length === 0 || this._prevTablePattern !== this.tablePattern) {\n      this._prevTablePattern = this.tablePattern;\n      this._columns = this.tablePattern.columns;\n      this.bookApi.getAll().subscribe((data: BookModel[]) => {\n        console.log(data);\n        this._rows = data;\n      });\n    }\n    return this._columns;\n  }\n\n  public columnIsObject(column: ColumnType): boolean {\n    return typeof column.type !== \"string\"\n  }\n\n  public get rows(): any[] {\n    return this._rows;\n  }\n}\n","<div class=\"card-body\">\n    <div class=\"table-responsive\">\n        <table class=\"table table-striped table-bordered\">\n            <thead>\n                <tr>\n                    <th *ngFor=\"let column of columns\">{{column.name}}</th>\n                    <th class=\"actions\">Actions</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td *ngFor=\"let column of columns\">\n                        <input *ngIf=\"!columnIsObject(column)\" type=\"text\" data-type=\"{{column.type}}\">\n                        <button *ngIf=\"columnIsObject(column)\" class=\"btn btn-primary\" type=\"button\">Show object</button>\n                    </td>\n                    <td class=\"actions\">\n                        <button class=\"btn btn-success\" type=\"button\">Add new</button>\n                    </td>\n                </tr>\n\n                <tr *ngFor=\"let row of rows\">\n                    <td *ngFor=\"let column of columns\">\n                        <input *ngIf=\"!columnIsObject(column)\" type=\"text\" data-type=\"{{column.type}}\">\n                        <button *ngIf=\"columnIsObject(column)\" class=\"btn btn-primary\" type=\"button\">Show object</button>\n                    </td>\n                    <td class=\"actions\">\n                        <button class=\"btn btn-warning\" type=\"button\">Edit</button>\n                        <button class=\"btn btn-danger\" type=\"button\">Delete</button>\n                    </td>\n                </tr>\n\n                <!-- This is templates -->\n                <tr>\n                    <td *ngFor=\"let column of columns\">\n                        <input type=\"text\" data-type=\"{{column.type}}\">\n                    </td>\n                    <td class=\"actions\">\n                        <button class=\"btn btn-success\" type=\"button\">Save</button>\n                        <button class=\"btn btn-secondary\" type=\"button\">Cancel</button>\n                    </td>\n                </tr>\n                <tr>\n                    <td><input type=\"text\" readonly=\"\" value=\"View mode\" disabled=\"\"></td>\n                    <td><input type=\"text\" value=\"View mode\" disabled=\"\" readonly=\"\"></td>\n                    <td class=\"actions\">\n                        <button class=\"btn btn-warning\" type=\"button\">Edit</button>\n                        <button class=\"btn btn-danger\" type=\"button\">Delete</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}